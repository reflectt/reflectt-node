# reflectt-node Docker Compose
# Usage: docker-compose up
# Dashboard: http://localhost:4445
#
# NOTE: This starts with a clean identity (no inherited team data).
# To customize your team, mount a TEAM-ROLES.yaml:
#   volumes:
#     - ./my-team-roles.yaml:/app/defaults/TEAM-ROLES.yaml:ro

services:
  reflectt-node:
    build: .
    ports:
      - "4445:4445"
    volumes:
      - reflectt-data:/data
    environment:
      - PORT=4445
      - HOST=0.0.0.0
      - NODE_ENV=production
      - REFLECTT_HOME=/data
      # ── OpenClaw gateway connection (optional) ──
      # Uncomment these to connect to OpenClaw for agent messaging.
      # Without them, reflectt-node runs standalone (dashboard + API work fine).
      #
      # Get your token:  openclaw gateway token
      # Then uncomment and fill in:
      # - OPENCLAW_GATEWAY_URL=ws://host.docker.internal:18789
      # - OPENCLAW_GATEWAY_TOKEN=your_token_here
      #
      # ── Optional auth tokens ──
      # - REFLECTT_MANAGE_TOKEN=your_manage_token
      # - REFLECTT_HOST_HEARTBEAT_TOKEN=your_heartbeat_token
    restart: unless-stopped

volumes:
  reflectt-data:

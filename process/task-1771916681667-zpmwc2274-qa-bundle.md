# QA Bundle — task-1771916681667-zpmwc2274

## Summary
Fix strict review-bundle CI evaluation: use GitHub **check-runs** as the source of truth (modern GitHub Actions signal), not the legacy combined status endpoint.

This resolves the false-negative where `commits/:sha/status` returns `pending` with **0 statuses** even though all check-runs are green.

## Changes
- `src/server.ts`
  - `resolvePrAndCi()` now:
    1) fetches `commits/:sha/check-runs` and computes CI state from check-runs
    2) falls back to `commits/:sha/status` only if check-runs unavailable/unreadable

- `src/github-ci.ts`
  - Pure CI evaluators:
    - `computeCiFromCheckRuns()`
    - `computeCiFromCombinedStatus()`

- `tests/github-ci.test.ts`
  - Regression coverage:
    - combined status pending/empty + green check-runs → check-runs compute `success`
    - failing check-run still yields `failure`

- `docs/runbooks/review-bundle-ci-signal.md`
  - Documents strict-mode CI source-of-truth + rules.

## Evidence
- `npm test` → 50 files passed, 859 tests passed, 1 skipped.

## How to Validate
- Create/choose a PR where combined statuses are empty/pending, but GitHub Actions check-runs are green.
- Run strict review bundle:
  - `POST /tasks/:id/review-bundle { "strict": true }`
- Expect: bundle verdict PASS (CI state `success`) based on check-runs.

## Caveats
- Check-runs are now primary CI signal; combined status is fallback only.
